(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{153:function(e,t,n){},154:function(e,t,n){},179:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n(0),r=n.n(c),s=n(48),l=n.n(s),i=(n(152),n(153),n(56)),o=n(57),d=n(70),u=n(68),j=(n(154),n(132)),h=n(193),O=n(113),b=n(196),x=n(180),C=n(128),p=n.n(C).a.create();p.isConnected=function(){var e=localStorage.getItem("MySSO_token");return p.defaults.headers.common.Authorization="Bearer ".concat(e),p.logIn()},p.logIn=function(e){return this({method:"post",url:"/login",data:e}).then((function(e){var t=e.data.token;return t?(localStorage.setItem("MySSO_token",t),p.defaults.headers.common.Authorization="Bearer ".concat(t),{success:!0,error:null}):(localStorage.removeItem("MySSO_token"),{success:!1,error:"Authentification failed"})})).catch((function(e){return localStorage.removeItem("MySSO_token"),{success:!1,error:"Authentification failed"}}))},p.getClients=function(){return this({method:"get",url:"/admin/clients"}).then((function(e){return e.data}))},p.saveClient=function(e){return this({method:"put",url:"/admin/clients",data:e}).then((function(e){return e.data}))},p.getUsers=function(){return this({method:"get",url:"/admin/users"}).then((function(e){return e.data}))},p.saveUser=function(e){return this({method:"put",url:"/admin/users",data:e}).then((function(e){return e.data}))};var m=p,f=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={error:null,username:"",password:""},e.handleChangeUsername=function(t){e.setState({username:t.target.value})},e.handleChangePassword=function(t){e.setState({password:t.target.value})},e.onFormSubmit=function(t){t.preventDefault();var n=e.props.redirect,a=e.state,c=a.username,r=a.password;m.logIn({username:c,password:r,redirect:n}).then((function(t){e.setState({error:null,username:"",password:""}),t.success?e.props.onSuccessLogin():e.setState({error:t.message})}))},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state,t=e.error,n=e.username,c=e.password;return Object(a.jsx)(j.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(a.jsx)(j.a.Column,{style:{maxWidth:350},children:Object(a.jsx)(h.a,{onSubmit:this.onFormSubmit.bind(this),size:"large",children:Object(a.jsxs)(O.a,{children:[t?Object(a.jsx)(b.a,{negative:!0,children:t}):null,Object(a.jsx)(h.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username",value:n,onChange:this.handleChangeUsername}),Object(a.jsx)(h.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",value:c,onChange:this.handleChangePassword}),Object(a.jsx)(x.a,{type:"submit",children:"Login"})]})})})})}}]),n}(r.a.Component),v=n(194),g=n(195),S=n(192),w=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={clients:[],clientName:"",clientSecret:"",addressIP:"",users:[],username:"",password:"",clientEdited:null,userEdited:null},e.componentDidMount=function(){m.getClients().then((function(t){return e.setState({clients:t})})),m.getUsers().then((function(t){return e.setState({users:t})}))},e.handleAddClient=function(){var t=e.state,n=t.clientName,a=t.clientSecret,c=t.addressIP;m.saveClient({clientName:n,clientSecret:a,addressIP:c}).then((function(e){return console.log(e)}))},e.handleEditClient=function(t){e.setState({clientEdited:t})},e.handleDeleteClient=function(e){console.log("TODO delete client")},e.handleSaveClient=function(){var t=e.state.clientEdited;m.saveClient(t).then((function(e){return console.log(e)})),e.setState({clientEdited:null})},e.handleAddUser=function(){var t=e.state,n=t.username,a=t.password;m.saveUser({username:n,password:a}).then((function(e){return console.log(e)}))},e.handleEditUser=function(t){e.setState({userEdited:t})},e.handleDeleteUser=function(e){console.log("TODO delete user")},e.handleSaveUser=function(){var t=e.state.userEdited;m.saveUser(t).then((function(e){return console.log(e)})),e.setState({userEdited:null})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.clients,c=t.clientName,r=t.clientSecret,s=t.addressIP,l=t.users,i=t.username,o=t.password,d=t.clientEdited,u=t.userEdited,h=[{menuItem:"Clients",render:function(){return Object(a.jsx)(v.a.Pane,{children:Object(a.jsxs)(g.a,{celled:!0,selectable:!0,children:[Object(a.jsxs)(g.a.Header,{children:[Object(a.jsx)(g.a.HeaderCell,{children:"Name"}),Object(a.jsx)(g.a.HeaderCell,{children:"Secret"}),Object(a.jsx)(g.a.HeaderCell,{children:"Address"}),Object(a.jsx)(g.a.HeaderCell,{children:"Actions"})]}),Object(a.jsxs)(g.a.Body,{children:[Object(a.jsxs)(g.a.Row,{children:[Object(a.jsx)(g.a.Cell,{children:Object(a.jsx)(S.a,{type:"text",value:c,placeholder:"Client name"})}),Object(a.jsx)(g.a.Cell,{children:Object(a.jsx)(S.a,{type:"password",value:r,placeholder:"Client secret"})}),Object(a.jsx)(g.a.Cell,{children:Object(a.jsx)(S.a,{type:"text",value:s,placeholder:"0.0.0.0"})}),Object(a.jsx)(g.a.Cell,{children:Object(a.jsx)(x.a,{icon:"add",onClick:e.handleAddClient})})]}),n.map((function(t,n){return d?Object(a.jsxs)(g.a.Row,{children:[Object(a.jsx)(g.a.Cell,{children:Object(a.jsx)(S.a,{type:"text",value:d.clientName,placeholder:"Client name"})}),Object(a.jsx)(g.a.Cell,{children:Object(a.jsx)(S.a,{type:"password",value:d.clientSecret,placeholder:"Client secret"})}),Object(a.jsx)(g.a.Cell,{children:Object(a.jsx)(S.a,{type:"text",value:d.addressIP,placeholder:"0.0.0.0"})}),Object(a.jsx)(g.a.Cell,{children:Object(a.jsx)(x.a,{icon:"save",onClick:e.handleSaveClient})})]},n):Object(a.jsxs)(g.a.Row,{children:[Object(a.jsx)(g.a.Cell,{children:t.clientName}),Object(a.jsx)(g.a.Cell,{children:"********"}),Object(a.jsx)(g.a.Cell,{children:t.addressIP}),Object(a.jsxs)(g.a.Cell,{children:[Object(a.jsx)(x.a,{icon:"edit",onClick:function(){return e.handleEditClient(t)}}),Object(a.jsx)(x.a,{icon:"delete",onClick:function(){return e.handleDeleteClient(t)}})]})]},n)}))]})]})})}},{menuItem:"Users",render:function(){return Object(a.jsx)(v.a.Pane,{children:Object(a.jsxs)(g.a,{celled:!0,selectable:!0,children:[Object(a.jsxs)(g.a.Header,{children:[Object(a.jsx)(g.a.HeaderCell,{children:"Name"}),Object(a.jsx)(g.a.HeaderCell,{children:"Password"}),Object(a.jsx)(g.a.HeaderCell,{children:"Clients"}),Object(a.jsx)(g.a.HeaderCell,{children:"Actions"})]}),Object(a.jsxs)(g.a.Body,{children:[Object(a.jsxs)(g.a.Row,{children:[Object(a.jsx)(g.a.Cell,{children:Object(a.jsx)(S.a,{type:"text",value:i,placeholder:"User name"})}),Object(a.jsx)(g.a.Cell,{children:Object(a.jsx)(S.a,{type:"password",value:o,placeholder:"User password"})}),Object(a.jsx)(g.a.Cell,{children:"TODO Clients"}),Object(a.jsx)(g.a.Cell,{children:Object(a.jsx)(x.a,{icon:"add",onClick:e.handleAddUser})})]}),l.map((function(t,n){return u?Object(a.jsxs)(g.a.Row,{children:[Object(a.jsx)(g.a.Cell,{children:Object(a.jsx)(S.a,{type:"text",value:u.username,placeholder:"User name"})}),Object(a.jsx)(g.a.Cell,{children:Object(a.jsx)(S.a,{type:"password",value:u.password,placeholder:"User password"})}),Object(a.jsx)(g.a.Cell,{children:"TODO Clients"}),Object(a.jsx)(g.a.Cell,{children:Object(a.jsx)(x.a,{icon:"save",onClick:e.handleSaveUser})})]},n):Object(a.jsxs)(g.a.Row,{children:[Object(a.jsx)(g.a.Cell,{children:t.username}),Object(a.jsx)(g.a.Cell,{children:"********"}),Object(a.jsx)(g.a.Cell,{children:"TODO Clients"}),Object(a.jsxs)(g.a.Cell,{children:[Object(a.jsx)(x.a,{icon:"edit",onClick:function(){return e.handleEditUser(t)}}),Object(a.jsx)(x.a,{icon:"delete",onClick:function(){return e.handleDeleteUser(t)}})]})]},n)}))]})]})})}}];return Object(a.jsx)(j.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"top",children:Object(a.jsx)(j.a.Column,{children:Object(a.jsx)(v.a,{panes:h})})})}}]),n}(r.a.Component),y=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={connected:!1},e.componentDidMount=function(){m.isConnected().then((function(t){return e.setState({connected:t.success})}))},e.onSuccessLogin=function(){e.setState({connected:!0})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state.connected;return Object(a.jsx)("div",{className:"App",children:e?Object(a.jsx)(w,{}):Object(a.jsx)(f,{onSuccessLogin:this.onSuccessLogin})})}}]),n}(c.Component),U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,198)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};l.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(y,{})}),document.getElementById("root")),U()}},[[179,1,2]]]);
//# sourceMappingURL=main.3bd5a106.chunk.js.map